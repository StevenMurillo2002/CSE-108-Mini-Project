<!DOCTYPE html>
<html>
  <head>
    <title>All Courses</title>
    <link rel="stylesheet" href="/static/styles.css">
  </head>
  <body>
    {% extends "base.html" %}
    {% block title %}All Courses{% endblock %}

    {% block content %}

    <h1>All Courses</h1>
    <table>
        <tr>
            <th>Course</th>
            <th>Teacher</th>
            <th>Time</th>
            <th>Students Enrolled</th>
            <th>Add / Drop</th>
        </tr>
        {% for c in courses %}
        <tr>
            <td>{{ c.name }}</td>
            <td>{{ c.professor.name }}</td>
            <td>{{ c.time }}</td>
            <td>{{ c.students.count() }} / {{ c.capacity }}</td>
            <td>
            {% if current_user in c.students %}
            <form action="{{ url_for('drop_course', course_id=c.id) }}" method="POST" style="display:inline;">
                <button type="submit" title="Remove from class">&#8722;</button> <!-- minus sign -->
            </form>
            {% elif c.students.count() < c.capacity %}
            <form action="{{ url_for('add_course', course_id=c.id) }}" method="POST" style="display:inline;">
                <button type="submit" title="Add to class">&#43;</button> <!-- plus sign -->
            </form>
            {% else %}
            <button type="button" disabled>&#43;</button> <!-- Disabled if full -->
            {% endif %}
            </td>          
        </tr>
        {% endfor %}
    </table>
    
    <form method="get" action="{{ url_for('student_courses') }}">
      <button class="login-button" type="submit">Back to My Courses</button>
    </form>
    
    <form action="{{ url_for('logout') }}" method="GET">
        <button type="submit">Log Out</button>
    </form>
    
    {% endblock %}
  </body>
</html>
